<?xml version="1.0" encoding="UTF-8" ?>
<script name="cm_aaca.getNodeOutput">
  <group>RatingTree</group>
  <label>getNodeOutput</label>
  <metaVersion>4</metaVersion>
  <parameterList>
    <parameter name="node" type="rifp">
      <mandatory>true</mandatory>
      <type>dstruct_cm_spoc.data.RatingTreeNodeOutput</type>
    </parameter>
  </parameterList>
  <valueType>dstruct_cm_aaca.NodoDecision</valueType>
  <script><![CDATA[
    var output = new cm_aaca.NodeOutput();

    if(node.RTNOListArr){
        for(var i=0; i< node.RTNOListArrDS.ListDS.length; i++)
            output.output[output.output.length] = node.RTNOListArrDS.ListDS[i].ListCode;
    }else if(node.RTNOTribeArr){
        for(var i=0; i< node.RTNOTribeArrDS.ListDS.length; i++)
            output.output[output.output.length] = node.RTNOTribeArrDS.ListDS[i].TribeId;
    }else if(node.RTNOTribeCategoryArr){
        for(var i=0; i< node.RTNOTribeCategoryArrDS.ListDS.length; i++)
            output.output[output.output.length] = node.RTNOTribeCategoryArrDS.ListDS[i].CategoryId;
    }else if(node.RTNOTonArr){
        for(var i=0; i< node.RTNOTonArrDS.ListDS.length; i++)
            output.output[output.output.length] = node.RTNOTonArrDS.ListDS[i].TonCode;
    }else if(node.RTNOTariffPlanArr){
        for(var i=0; i< node.RTNOTariffPlanArrDS.ListDS.length; i++)
            output.output[output.output.length] = node.RTNOTariffPlanArrDS.ListDS[i].TariffPlanIdentifier;
    }else if(node.RTNOServiceProviderArr){
        for(var i=0; i< node.RTNOServiceProviderArrDS.ListDS.length; i++)
            output.output[output.output.length] = node.RTNOServiceProviderArrDS.ListDS[i].ServiceProviderId;
    }else if(node.RTNodeOutputArr){
        for(var i=0; i< node.RTNodeOutputArrDS.ListDS.length; i++)
            output.output[output.output.length] = node.RTNodeOutputArrDS.ListDS[i].NodeValue;
    }

    if(output.output.length == 0)
        Global.throwException("The node has not output defined!");

    return output;
  ]]></script>
</script>