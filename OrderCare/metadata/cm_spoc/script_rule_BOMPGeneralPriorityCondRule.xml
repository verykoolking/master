<?xml version="1.0" encoding="UTF-8" ?>
<script name="cm_spoc.rule_BOMPGeneralPriorityCondRule">
  <group>rules_scripts.Configuration</group>
  <label>rule_BOMPGeneralPriorityCondRule</label>
  <metaVersion>4</metaVersion>
  <parameterList>
    <parameter name="data" type="rifp">
      <type>nmeta_com.conceptwave.system.Object</type>
    </parameter>
    <parameter name="errList" type="rifp">
      <type>nmeta_com.conceptwave.system.Object</type>
    </parameter>
  </parameterList>
  <script><![CDATA[
    //The attribute must be saved in the catalog only if the related attribute assumes one of  the values shown in column H.
    //If the related attribute is different from one of such values and the main attribute is set, an error is to be arisen.

    //SPOC Entity       -- BoltOnModalityPriority
    //SPOC Entity attribute       -- GeneralPriority
    //Related SPOC Entity -- TariffPlan
    //Related SPOC Entity attribute -- TariffPlan
    //COLUMN H -- Not Empty


    var entity = data.BoltOnModalityPriority;
    var tp = data.TariffPlan;

    if (entity.GeneralPriority && tp.TariffPlan  ) {

        errList.addErrorMessage(data,["GeneralPriority does not match with TariffPlan"],"NGAA_003","E");

    }
        return false;
  ]]></script>
</script>