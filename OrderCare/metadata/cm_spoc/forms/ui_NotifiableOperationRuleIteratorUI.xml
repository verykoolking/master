<?xml version="1.0" encoding="UTF-8" ?>
<userInterface name="cm_spoc.forms.NotifiableOperationRuleIteratorUI">
  <group>Operation</group>
  <label>NotifiableOperationRuleIteratorUI</label>
  <metaVersion>4</metaVersion>
  <variableList>
    <variable name="subOpRelations" type="leaf">
      <valueType>dtype_com.conceptwave.system.String</valueType>
    </variable>
    <variable name="subOpComplex" type="leaf">
      <valueType>dtype_com.conceptwave.system.Boolean</valueType>
    </variable>
    <variable name="subOpCPtype" type="leaf">
      <valueType>dtype_com.conceptwave.system.Integer</valueType>
    </variable>
    <variable name="subOpValues" type="leaf">
      <flags enum-type="metadataFlag">ARRAY</flags>
      <valueType>dtype_com.conceptwave.system.String</valueType>
    </variable>
    <variable name="SubOpType" type="leaf">
      <valueType>dtype_com.conceptwave.system.String</valueType>
    </variable>
    <variable name="subOperation" type="leaf">
      <valueType>dtype_cwt_pcdd.catalogCode</valueType>
    </variable>
    <variable name="subOpEntity" type="leaf">
      <valueType>dtype_com.conceptwave.system.Boolean</valueType>
    </variable>
    <variable name="subOpEntityLabel" type="leaf">
      <valueType>dtype_com.conceptwave.system.String</valueType>
    </variable>
    <variable name="subOpCodeTable" type="leaf">
      <valueType>dtype_com.conceptwave.system.Boolean</valueType>
    </variable>
    <variable name="subOpCodeTableLabel" type="leaf">
      <valueType>dtype_com.conceptwave.system.String</valueType>
    </variable>
    <variable name="SubOperationCode" type="leaf">
      <valueType>dtype_com.conceptwave.system.String</valueType>
    </variable>
    <variable name="subOpComplexLabel" type="leaf">
      <valueType>dtype_com.conceptwave.system.String</valueType>
    </variable>
    <variable name="SubOperationCodeValue" type="leaf">
      <valueType>dtype_com.conceptwave.system.String</valueType>
    </variable>
    <variable name="model" type="leaf">
      <flags enum-type="metadataFlag">ARRAY</flags>
      <valueType>dstruct_cm_spoc.data.NotifiableOperationRule</valueType>
    </variable>
    <variable name="Selected" type="leaf">
      <valueType>dtype_com.conceptwave.system.Boolean</valueType>
    </variable>
    <variable name="Status" type="leaf">
      <valueType>dtype_com.conceptwave.system.String</valueType>
    </variable>
    <variable name="Substatus" type="leaf">
      <valueType>dtype_com.conceptwave.system.String</valueType>
    </variable>
    <variable name="SubstatusDescription" type="leaf">
      <valueType>dtype_com.conceptwave.system.String</valueType>
    </variable>
    <variable name="isloading" type="leaf">
      <valueType>dtype_com.conceptwave.system.Boolean</valueType>
    </variable>
  </variableList>
  <vformList>
    <vform name="Forms" type="frmui">
      <extends>ui_com.conceptwave.system.UserInterface/frmui_Forms</extends>
      <overlayList>
        <overlay name="Default" type="exov">
          <base>ui_com.conceptwave.system.UserInterface/frmui_Forms/vform_Default</base>
          <extends>ui_com.conceptwave.system.UserInterface/frmui_Forms/vform_Default</extends>
          <label>Default</label>
          <overrideList>
            <override name="VerticalLayout" type="elvlt">
              <width>3300px</width>
              <elementList>
                <element name="NotifiableOperationRules" type="elgrd">
                  <numOfCols>38</numOfCols>
                  <width>3300px</width>
                  <elementList>
                    <element name="Selected" type="elchk">
                      <columnSpan>1</columnSpan>
                      <showLabel>false</showLabel>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/leaf_Selected</variablePath>
                        </variablePathList>
                      </variable>
                      <width>30px</width>
                    </element>
                    <element name="CellSpacer" type="elcsp">
                      <width>5px</width>
                    </element>
                    <element name="Operation" type="elfld">
                      <autoFocusNextField>false</autoFocusNextField>
                      <canSort>false</canSort>
                      <columnSpan>1</columnSpan>
                      <label>Operation</label>
                      <onChangeMethod type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/uimthd_defineSubOperationsByOperation</variablePath>
                        </variablePathList>
                      </onChangeMethod>
                      <showLabel>false</showLabel>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/leaf_model</variablePath>
                          <variablePath>dstruct_cm_spoc.data.NotifiableOperationRule/dstruct_Operation</variablePath>
                        </variablePathList>
                      </variable>
                      <width>100px</width>
                    </element>
                    <element name="OperationButton" type="elbtn">
                      <clickMethod type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/usrActionMethod_FinderOperationReferenceDialog</variablePath>
                        </variablePathList>
                      </clickMethod>
                      <columnSpan>1</columnSpan>
                      <icon>/cwf/finder.gif</icon>
                      <width>22px</width>
                    </element>
                    <element name="CellSpacer1" type="elcsp">
                      <width>5px</width>
                    </element>
                    <element name="subOperation" type="elfld">
                      <autoFocusNextField>false</autoFocusNextField>
                      <canSort>false</canSort>
                      <columnSpan>1</columnSpan>
                      <dynLabel type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/leaf_subOpEntityLabel</variablePath>
                        </variablePathList>
                      </dynLabel>
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/permMethod_subOperationEditable</variablePath>
                        </variablePathList>
                      </editable>
                      <onChangeMethod type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/uimthd_defineSubOperationsByOperation</variablePath>
                        </variablePathList>
                      </onChangeMethod>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/leaf_subOperation</variablePath>
                        </variablePathList>
                      </variable>
                      <width>150px</width>
                    </element>
                    <element name="SubOperationButton" type="elbtn">
                      <clickMethod type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/usrActionMethod_FinderSubOperationReferenceDialog</variablePath>
                        </variablePathList>
                      </clickMethod>
                      <columnSpan>1</columnSpan>
                      <disabled type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/permMethod_subOperationButtonDisabled</variablePath>
                        </variablePathList>
                      </disabled>
                      <icon>/cwf/finder.gif</icon>
                      <width>22px</width>
                    </element>
                    <element name="CellSpacer13" type="elcsp">
                      <width>5px</width>
                    </element>
                    <element name="SubOperationCodeValue" type="elfld">
                      <autoFocusNextField>false</autoFocusNextField>
                      <canSort>false</canSort>
                      <columnSpan>1</columnSpan>
                      <dynLabel type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/leaf_subOpComplexLabel</variablePath>
                        </variablePathList>
                      </dynLabel>
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/permMethod_CodeValueEditable</variablePath>
                        </variablePathList>
                      </editable>
                      <onChangeMethod type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/uimthd_defineSubOperationsByOperation</variablePath>
                        </variablePathList>
                      </onChangeMethod>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/leaf_SubOperationCodeValue</variablePath>
                        </variablePathList>
                      </variable>
                      <width>150px</width>
                    </element>
                    <element name="CodeValueButton2" type="elbtn">
                      <clickMethod type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/usrActionMethod_AttributeSelectReferenceDialog</variablePath>
                        </variablePathList>
                      </clickMethod>
                      <columnSpan>1</columnSpan>
                      <disabled type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/permMethod_CodeValueButtonDisabled</variablePath>
                        </variablePathList>
                      </disabled>
                      <icon>/cwf/finder.gif</icon>
                      <width>22px</width>
                    </element>
                    <element name="CellSpacer2" type="elcsp">
                      <width>5px</width>
                    </element>
                    <element name="TariffPlan" type="elfld">
                      <autoFocusNextField>false</autoFocusNextField>
                      <canSort>false</canSort>
                      <columnSpan>1</columnSpan>
                      <label>Plan</label>
                      <showLabel>false</showLabel>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/leaf_model</variablePath>
                          <variablePath>dstruct_cm_spoc.data.NotifiableOperationRule/dstruct_TariffPlan</variablePath>
                        </variablePathList>
                      </variable>
                      <width>60px</width>
                    </element>
                    <element name="TariffPlanButton" type="elbtn">
                      <clickMethod type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/usrActionMethod_FinderTariffPlanReferenceDialog</variablePath>
                        </variablePathList>
                      </clickMethod>
                      <columnSpan>1</columnSpan>
                      <icon>/cwf/finder.gif</icon>
                      <width>22px</width>
                    </element>
                    <element name="CellSpacer3" type="elcsp">
                      <width>5px</width>
                    </element>
                    <element name="ENNbutton" type="elbtn">
                      <clickMethod type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/usrActionMethod_ENNPickListDialog</variablePath>
                        </variablePathList>
                      </clickMethod>
                      <columnSpan>1</columnSpan>
                      <label>External Notifications Nodes</label>
                      <width>170px</width>
                    </element>
                    <element name="CellSpacer4" type="elcsp">
                      <width>5px</width>
                    </element>
                    <element name="LifeCycleSubStatus" type="elfld">
                      <autoFocusNextField>false</autoFocusNextField>
                      <canSort>false</canSort>
                      <columnSpan>1</columnSpan>
                      <label>Plan</label>
                      <onChangeMethod type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/uimthd_defineSubOperationsByOperation</variablePath>
                        </variablePathList>
                      </onChangeMethod>
                      <showLabel>false</showLabel>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/leaf_model</variablePath>
                          <variablePath>dstruct_cm_spoc.data.NotifiableOperationRule/dstruct_LifeCycleSubStatus</variablePath>
                        </variablePathList>
                      </variable>
                      <width>60px</width>
                    </element>
                    <element name="LifeCycleSubStatusButton" type="elbtn">
                      <clickMethod type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/usrActionMethod_FinderLifeCycleSubStatusReferenceDialog</variablePath>
                        </variablePathList>
                      </clickMethod>
                      <columnSpan>1</columnSpan>
                      <icon>/cwf/finder.gif</icon>
                      <width>22px</width>
                    </element>
                    <element name="CellSpacer14" type="elcsp">
                      <width>5px</width>
                    </element>
                    <element name="Status" type="elfld">
                      <autoFocusNextField>false</autoFocusNextField>
                      <canSort>false</canSort>
                      <columnSpan>1</columnSpan>
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
                        </variablePathList>
                      </editable>
                      <label>Subscriber Status</label>
                      <showLabel>false</showLabel>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/leaf_Status</variablePath>
                        </variablePathList>
                      </variable>
                      <width>60px</width>
                    </element>
                    <element name="CellSpacer5" type="elcsp">
                      <width>5px</width>
                    </element>
                    <element name="Substatus" type="elfld">
                      <autoFocusNextField>false</autoFocusNextField>
                      <canSort>false</canSort>
                      <columnSpan>1</columnSpan>
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
                        </variablePathList>
                      </editable>
                      <label>Subscriber Substatus</label>
                      <showLabel>false</showLabel>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/leaf_Substatus</variablePath>
                        </variablePathList>
                      </variable>
                      <width>60px</width>
                    </element>
                    <element name="CellSpacer6" type="elcsp">
                      <width>5px</width>
                    </element>
                    <element name="SubstatusDescription" type="elfld">
                      <autoFocusNextField>false</autoFocusNextField>
                      <canSort>false</canSort>
                      <columnSpan>1</columnSpan>
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
                        </variablePathList>
                      </editable>
                      <label>Subscriber Substatus Description </label>
                      <showLabel>false</showLabel>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/leaf_SubstatusDescription</variablePath>
                        </variablePathList>
                      </variable>
                      <width>60px</width>
                    </element>
                    <element name="CellSpacer15" type="elcsp">
                      <width>5px</width>
                    </element>
                    <element name="ServiceProviderEnum" type="elslct">
                      <canSort>false</canSort>
                      <columnSpan>1</columnSpan>
                      <label>Service Provider</label>
                      <multiselect>false</multiselect>
                      <onChangeMethod type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/uimthd_ServiceProviderSelected</variablePath>
                        </variablePathList>
                      </onChangeMethod>
                      <showLabel>false</showLabel>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/leaf_model</variablePath>
                          <variablePath>dstruct_cm_spoc.data.NotifiableOperationRule/dstruct_ServiceProviderEnum</variablePath>
                        </variablePathList>
                      </variable>
                      <width>60px</width>
                    </element>
                    <element name="CellSpacer7" type="elcsp">
                      <width>5px</width>
                    </element>
                    <element name="NotifErrorListHandling" type="elslct">
                      <canSort>false</canSort>
                      <columnSpan>1</columnSpan>
                      <label>Any error</label>
                      <onChangeMethod type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/uimthd_selectedNotifErrorListHandling</variablePath>
                        </variablePathList>
                      </onChangeMethod>
                      <showLabel>false</showLabel>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/leaf_model</variablePath>
                          <variablePath>dstruct_cm_spoc.data.NotifiableOperationRule/dstruct_NotifErrorListHandling</variablePath>
                        </variablePathList>
                      </variable>
                      <width>60px</width>
                    </element>
                    <element name="CellSpacer8" type="elcsp">
                      <width>5px</width>
                    </element>
                    <element name="ErrorCode" type="elfld">
                      <autoFocusNextField>false</autoFocusNextField>
                      <canSort>false</canSort>
                      <columnSpan>1</columnSpan>
                      <editable type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/permMethod_errorCodeEditable</variablePath>
                        </variablePathList>
                      </editable>
                      <label>The selected</label>
                      <showLabel>false</showLabel>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/leaf_model</variablePath>
                          <variablePath>dstruct_cm_spoc.data.NotifiableOperationRule/dstruct_ErrorCode</variablePath>
                        </variablePathList>
                      </variable>
                      <width>60px</width>
                    </element>
                    <element name="CellSpacer9" type="elcsp">
                      <width>5px</width>
                    </element>
                    <element name="OperationMode" type="elslct">
                      <canSort>false</canSort>
                      <columnSpan>1</columnSpan>
                      <label>Operation Mode</label>
                      <showLabel>false</showLabel>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/leaf_model</variablePath>
                          <variablePath>dstruct_cm_spoc.data.NotifiableOperationRule/dstruct_OperationMode</variablePath>
                        </variablePathList>
                      </variable>
                      <width>60px</width>
                    </element>
                    <element name="CellSpacer10" type="elcsp">
                      <width>5px</width>
                    </element>
                    <element name="DeliveryRescheduling" type="elchk">
                      <canSort>false</canSort>
                      <columnSpan>1</columnSpan>
                      <label>DeliveryRescheduling</label>
                      <showLabel>false</showLabel>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/leaf_model</variablePath>
                          <variablePath>dstruct_cm_spoc.data.NotifiableOperationRule/dstruct_DeliveryRescheduling</variablePath>
                        </variablePathList>
                      </variable>
                      <width>60px</width>
                    </element>
                    <element name="CellSpacer11" type="elcsp">
                      <width>5px</width>
                    </element>
                    <element name="RequiresSubscription" type="elchk">
                      <canSort>false</canSort>
                      <columnSpan>1</columnSpan>
                      <label>Requires Subscription</label>
                      <showLabel>false</showLabel>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/leaf_model</variablePath>
                          <variablePath>dstruct_cm_spoc.data.NotifiableOperationRule/dstruct_RequiresSubscription</variablePath>
                        </variablePathList>
                      </variable>
                      <width>60px</width>
                    </element>
                    <element name="CellSpacer12" type="elcsp">
                      <width>5px</width>
                    </element>
                    <element name="ActiveRule" type="elchk">
                      <canSort>false</canSort>
                      <columnSpan>1</columnSpan>
                      <label>Active</label>
                      <showLabel>false</showLabel>
                      <variable type="varPath">
                        <variablePathList>
                          <variablePath>ui_cm_spoc.forms.NotifiableOperationRuleIteratorUI/leaf_model</variablePath>
                          <variablePath>dstruct_cm_spoc.data.NotifiableOperationRule/dstruct_ActiveRule</variablePath>
                        </variablePathList>
                      </variable>
                      <width>60px</width>
                    </element>
                  </elementList>
                </element>
              </elementList>
            </override>
          </overrideList>
        </overlay>
      </overlayList>
    </vform>
  </vformList>
  <methodList>
    <method name="readOnly" type="permMethod">
      <script>return !this.model.readonly;</script>
    </method>
    <method name="ExternalNotificationNodeSelected" type="uimthd">
      <script>this.model.ExternalNotifNodeArr = this.model.ExternalNotificationNodeEnum;</script>
    </method>
    <method name="ServiceProviderSelected" type="uimthd">
      <script>this.model.ServiceProvider = this.model.ServiceProviderEnum;</script>
    </method>
    <method name="FinderOperationReferenceDialog" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var newDetail = new cm_spoc.FinderSelectReference(null,this);
        newDetail.setBaseItemCode("base_Operation");
        newDetail.parentUI = this;
        return newDetail;
      ]]></script>
    </method>
    <method name="referenceCallback" type="uimthd">
      <parameterList>
        <parameter name="itemCode" type="rifp">
          <mandatory>true</mandatory>
          <type>dtype_com.conceptwave.system.String</type>
        </parameter>
        <parameter name="baseItemCode" type="rifp">
          <mandatory>true</mandatory>
          <type>dtype_com.conceptwave.system.String</type>
        </parameter>
      </parameterList>
      <script><![CDATA[
        var s = new epc.data.Specification();
        s.project =  cwa_epc.getDefaultProj();

        s.specificationCode = itemCode;
        var operation = epc.getSpecificationByKey(s);
        if(operation)
        {
            var subOperationByOperationFinder = new Finder("cm_spoc.SubOperationsByOperationScriptFinder");
            subOperationByOperationFinder.searchDocument.Operation = operation.OperationId;
            var result = subOperationByOperationFinder.search();
        }
        if(result.length>0)
        {
            this.subOperation = null;
            this.SubOperationCodeValue = null;
            cm_spoc.initSubOperation([this.model]);

            this.model.Operation = itemCode;

            if(result[0].Entity == true){
                this.subOpEntityLabel = result[0].Label;
                this.SubOpType = result[0].SubOperation;
                this.subOpEntity = true;
                this.subOpCodeTable = false;
                this.subOpComplex = false;
            }
            else{
                if(result[0].Entity == false){
                    switch(result[0].Complex){
                    case 1:
                        this.subOpEntityLabel = result[0].Label;
                        this.SubOpType = result[0].SubOperation;
                        this.SubOperationCode = result[0].SubOperationCode;
                        this.subOpRelations =  result[0].Relations;
                        this.subOpCPtype = result[0].Complex;
                        this.subOpComplex = true;
                        this.subOpCodeTable = true;
                        this.subOpEntity = false;
                        break;
                    case 2:
                        this.subOpEntityLabel = result[0].Label;
                        this.SubOpType = result[0].SubOperation;
                        this.SubOperationCode = result[0].SubOperationCode;
                        this.subOpRelations =  result[0].Relations;
                        this.subOpCPtype = result[0].Complex;
                        this.subOpComplex = true;
                        this.subOpCodeTable = true;
                        this.subOpEntity = false;
                        break;
                     default:
                        this.subOpEntityLabel = result[0].Label;
                        this.SubOpType = result[0].SubOperation;
                        this.SubOperationCode = result[0].SubOperationCode;
                        this.subOpComplex = false;
                        this.subOpCodeTable = true;
                        this.subOpEntity = false;
                    }
                }
            }
        }
        else{
            this.model.Operation = itemCode;
            this.subOperation = null;
            this.SubOperationCodeValue = null;
            this.model.SubOperation = null;
            this.model.SubOperationDS = null;
            this.subOpComplex = null;
            this.subOpCodeTable = null;
            this.subOpEntity = null;
        }
      ]]></script>
    </method>
    <method name="defineSubOperationsByOperation" type="uimthd">
      <script>return true;</script>
    </method>
    <method name="errorCodeEditable" type="permMethod">
      <script><![CDATA[
        if(this.model.NotifErrorListHandling == 'S' && this.isloading == false){
            return true;
        }
        else{
            this.isloading = false;
            return false;
        }
      ]]></script>
    </method>
    <method name="selectedNotifErrorListHandling" type="uimthd">
      <script><![CDATA[
        if(this.model.NotifErrorListHandling == 'S'){
            this.parent.errorCodeLabelVisible = true;
        }
        else{
            this.parent.errorCodeLabelVisible = false;
        }
        return true;
      ]]></script>
    </method>
    <method name="FinderTariffPlanReferenceDialog" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var newDetail = new cm_spoc.FinderSelectReference(null,this);
        newDetail.setBaseItemCode("base_TariffPlan");
        newDetail.modelCallback = this.setTariffPlan;
        newDetail.parentUI = this;
        return newDetail;
      ]]></script>
    </method>
    <method name="setTariffPlan" type="uimthd">
      <parameterList>
        <parameter name="selected" type="rifp">
          <mandatory>true</mandatory>
          <type>nmeta_com.conceptwave.system.Object</type>
        </parameter>
      </parameterList>
      <script>this.parentUI.model.TariffPlan = selected.itemCode;</script>
    </method>
    <method name="FinderLifeCycleSubStatusReferenceDialog" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var newDetail = new cm_spoc.FinderSelectReference(null,this);
        newDetail.setBaseItemCode("base_LifeCycleSubStatus");
        newDetail.modelCallback = this.setLifeCycleSubStatus;
        newDetail.parentUI = this;
        return newDetail;
      ]]></script>
    </method>
    <method name="setLifeCycleSubStatus" type="uimthd">
      <parameterList>
        <parameter name="selected" type="rifp">
          <mandatory>true</mandatory>
          <type>nmeta_com.conceptwave.system.Object</type>
        </parameter>
      </parameterList>
      <script><![CDATA[
        this.parentUI.model.LifeCycleSubStatus = selected.itemCode;

        var s = new epc.data.Specification();
        s.project =  cwa_epc.getDefaultProj();

        s.specificationCode = selected.itemCode;
        var lifeCycleSubStatus = epc.getSpecificationByKey(s);
        if(lifeCycleSubStatus)
        {
            this.parentUI.Status = lifeCycleSubStatus.Status;
            this.parentUI.Substatus = lifeCycleSubStatus.Substatus;
            this.parentUI.SubstatusDescription = lifeCycleSubStatus.DescriptionOfSubstatus;
        }
      ]]></script>
    </method>
    <method name="FinderSubOperationReferenceDialog" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        if(this.subOpEntity == true)
        {
            var newDetail = new cm_spoc.FinderSelectReference(null,this);
            newDetail.setBaseItemCode('base_'+this.SubOpType);
            newDetail.modelCallback = this.setSubOperation;
            newDetail.parentUI = this;
            return newDetail;
        }
        else{
            switch(this.subOpCPtype){
            case 1:
                var entity = this.subOpRelations.split(":");
                var newDetail = new cm_spoc.FinderSelectReference(null,this);
                newDetail.setBaseItemCode('base_'+entity[0]);
                newDetail.modelCallback = this.setSubOperationCP1;
                newDetail.parentUI = this;
                return newDetail;
                break;
            case 2:
                var entity = this.subOpRelations.split(":");
                var newDetail = new cm_spoc.AttributeFinderSelectReference(null,this);
                newDetail.setBaseItemCode('base_'+entity[0]);
                newDetail.modelCallback = this.setSubOperationCP2;
                newDetail.parentUI = this;
                return newDetail;
                break;
            default:
                var newDetail = new cm_spoc.CodeTableFinderSelectReference(null,this);
                var BIC = this.SubOperationCode+"CodeTable";
                BIC = BIC.substring(0,32);
                newDetail.setBaseItemCode(BIC);
                newDetail.modelCallback = this.setSubOperationCT;
                newDetail.parentUI = this;
                return newDetail;
            }
        }
      ]]></script>
    </method>
    <method name="setSubOperation" type="uimthd">
      <parameterList>
        <parameter name="selected" type="rifp">
          <mandatory>true</mandatory>
          <type>nmeta_com.conceptwave.system.Object</type>
        </parameter>
      </parameterList>
      <script><![CDATA[
        var SubOperationTypeEnum = Global.getCTCodesAndDescriptions("SubOperationTypeCodeTable");

        var SubOperationType = null;

        for(var i=0;i<SubOperationTypeEnum.length;i=i+2)
        {
            if(SubOperationTypeEnum[i+1] == this.parentUI.SubOpType){
                var SubOperationType = SubOperationTypeEnum[i];
                break;
            }
        }
        if(SubOperationType!=null)
        {
            this.parentUI.model.SubOperationDS.SubOperationType = SubOperationType;
            this.parentUI.model.SubOperationDS.putValueByName(this.parentUI.SubOpType,selected.itemCode);
            this.parentUI.subOperation = selected.itemCode;
        }
      ]]></script>
    </method>
    <method name="setSubOperationCT" type="uimthd">
      <parameterList>
        <parameter name="selected" type="rifp">
          <mandatory>true</mandatory>
          <type>nmeta_com.conceptwave.system.Object</type>
        </parameter>
      </parameterList>
      <script><![CDATA[
        var SubOperationTypeEnum = Global.getCTCodesAndDescriptions("SubOperationTypeCodeTable");

        var SubOperationType = null;

        for(var i=0;i<SubOperationTypeEnum.length;i=i+2)
        {
            if(SubOperationTypeEnum[i+1] == this.parentUI.SubOpType){
                var SubOperationType = SubOperationTypeEnum[i];
                break;
            }
        }
        if(SubOperationType!=null)
        {
            this.parentUI.model.SubOperationDS.SubOperationType = SubOperationType;

            cm_spoc.initSubOpFromCT(this.parentUI.model.SubOperationDS,this.parentUI.SubOpType);

            this.parentUI.model.SubOperationDS.getValueByName(this.parentUI.SubOpType+"DS").putValueByName(this.parentUI.SubOperationCode,selected.itemCode);
            this.parentUI.subOperation = selected.itemCode;
        }
      ]]></script>
    </method>
    <method name="setSubOperationCP1" type="uimthd">
      <parameterList>
        <parameter name="selected" type="rifp">
          <mandatory>true</mandatory>
          <type>nmeta_com.conceptwave.system.Object</type>
        </parameter>
      </parameterList>
      <script><![CDATA[
        var SubOperationTypeEnum = Global.getCTCodesAndDescriptions("SubOperationTypeCodeTable");

        var SubOperationType = null;

        var entity = this.parentUI.subOpRelations.split(":");

        for(var i=0;i<SubOperationTypeEnum.length;i=i+2)
        {
            if(SubOperationTypeEnum[i+1] == this.parentUI.SubOpType){
                var SubOperationType = SubOperationTypeEnum[i];
                break;
            }
        }

        if(SubOperationType!=null)
        {
            this.parentUI.model.SubOperationDS.SubOperationType = SubOperationType;

            cm_spoc.initSubOpFromCT(this.parentUI.model.SubOperationDS,this.parentUI.SubOpType);

            this.parentUI.model.SubOperationDS.getValueByName(this.parentUI.SubOpType+"DS").putValueByName(entity[0],selected.itemCode);
            this.parentUI.subOperation = selected.itemCode;

            var entity0 = selected.itemCode;

            var s = new epc.data.Specification();
            s.project =  cwa_epc.getDefaultProj();

            var codeTemp = entity0;
            for(var i=0;i<entity.length-2;i++)
            {
                s.specificationCode = codeTemp;
                var c =  epc.getSpecificationByKey(s);
                if(!api_common.isFault(c)){
                    codeTemp = c.getValueByName(entity[i+1]);
                }
            }
            var values = new Array();
            if(codeTemp)
            {
                for(var i=0; i<codeTemp.length;i++)
                {
                    s.specificationCode = codeTemp[i];
                    var c =  epc.getSpecificationByKey(s);
                    if(!api_common.isFault(c)){
                        values[i] = c.getValueByName(entity[entity.length-1]);
                    }
                }
            }else{
                Global.showUserMessage("Error on the configuration of the entity selected");
            }
            this.parentUI.subOpComplexLabel = this.parentUI.SubOperationCode
            this.parentUI.subOpValues = values;
        }
      ]]></script>
    </method>
    <method name="setSubOperationCP2" type="uimthd">
      <parameterList>
        <parameter name="selected" type="rifp">
          <mandatory>true</mandatory>
          <type>nmeta_com.conceptwave.system.Object</type>
        </parameter>
      </parameterList>
      <script><![CDATA[
        var SubOperationTypeEnum = Global.getCTCodesAndDescriptions("SubOperationTypeCodeTable");

        var SubOperationType = null;
        var entity = this.parentUI.subOpRelations.split(":");
        var subAtt = this.parentUI.SubOperationCode.split(':');

        for(var i=0;i<SubOperationTypeEnum.length;i=i+2)
        {
            if(SubOperationTypeEnum[i+1] == this.parentUI.SubOpType){
                var SubOperationType = SubOperationTypeEnum[i];
                break;
            }
        }

        if(SubOperationType!=null)
        {
            this.parentUI.model.SubOperationDS.SubOperationType = SubOperationType;

            cm_spoc.initSubOpFromCT(this.parentUI.model.SubOperationDS,this.parentUI.SubOpType);
            for(var i = 0; i<subAtt.length; i++){
            this.parentUI.model.SubOperationDS.getValueByName(this.parentUI.SubOpType+"DS").putValueByName(subAtt[i],selected.getValueByName(subAtt[i]));
            }
            this.parentUI.subOperation = selected.CyclicActionSpecification;
        }
      ]]></script>
    </method>
    <method name="AttributeSelectReferenceDialog" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var newDetail = new cm_spoc.AttributeSelectReference(null,this);
        newDetail.setBaseItemCode(this.subOpValues);
        newDetail.modelCallback = this.setAttributeCP;
        newDetail.parentUI = this;
        return newDetail;
      ]]></script>
    </method>
    <method name="setAttributeCP" type="uimthd">
      <parameterList>
        <parameter name="selected" type="rifp">
          <mandatory>true</mandatory>
          <type>nmeta_com.conceptwave.system.Object</type>
        </parameter>
      </parameterList>
      <script><![CDATA[
        this.parentUI.model.SubOperationDS.getValueByName(this.parentUI.SubOpType+"DS").putValueByName(this.parentUI.SubOperationCode,selected.itemCode);
        this.parentUI.SubOperationCodeValue = selected.itemCode;
      ]]></script>
    </method>
    <method name="CodeValueEditable" type="permMethod">
      <script><![CDATA[
        if(this.subOpComplex == true && this.subOperation != null && this.subOpCPtype == 1)
            return true;
        else return false;
      ]]></script>
    </method>
    <method name="CodeValueButtonDisabled" type="permMethod">
      <script><![CDATA[
        if(this.subOpComplex == true && this.subOperation != null && this.subOpCPtype == 1)
            return false;
        else return true;
      ]]></script>
    </method>
    <method name="subOperationEditable" type="permMethod">
      <script><![CDATA[
        if(this.subOpEntity == true || this.subOpCodeTable == true || this.subOpComplex == true)
            return true;
        else return false;
      ]]></script>
    </method>
    <method name="subOperationButtonDisabled" type="permMethod">
      <script><![CDATA[
        if((this.subOpEntity == false || this.subOpEntity == null) && (this.subOpCodeTable == false
            || this.subOpCodeTable == null) && (this.subOpComplex == false || this.subOpComplex == null))
            return true;
        else return false;
      ]]></script>
    </method>
    <method name="onInit" type="action">
      <valueType>nmeta_com.conceptwave.system.Object</valueType>
      <script><![CDATA[
        //return this.cw$super_onInit();
        this.subOpEntityLabel = " ";
        this.subOpComplexLabel = " ";
      ]]></script>
    </method>
    <method name="setModel" type="uimthd">
      <parameterList>
        <parameter name="selectedItems" type="rifp">
          <array>true</array>
          <type>dstruct_cm_spoc.PickListDS</type>
        </parameter>
      </parameterList>
      <script><![CDATA[
        this.parentUI.model.ExternalNotifNodeArrDS.List = null;
        this.parentUI.model.ExternalNotifNodeArrDS.ListDS = null;
        for(var i=0;i<selectedItems.length;i++){
            this.parentUI.model.ExternalNotifNodeArrDS.List[i] = selectedItems[i].id;
        }
      ]]></script>
    </method>
    <method name="ENNPickListDialog" type="usrActionMethod">
      <dialogHeight>300</dialogHeight>
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <dialogWidth>600</dialogWidth>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var pl = new cm_spoc.forms.ExternalNotificationNodePickList(null,this);
        pl.parentUI = this;
        pl.modelCallback = this.setModel;
        pl.availableItems = new DataObjectList();

        var itemFinder = new Finder("cm_spoc.ExternalNotificationNodeFinder");
        var result = itemFinder.search();
        if(!this.model.ExternalNotifNodeArrDS.specificationCode)
        {
            var ExternalNotifNodeArr = cm_spoc.initInnerDS("base_ExternalNotifNodeArr");
            this.model.ExternalNotifNodeArrDS = ExternalNotifNodeArr;
        }
        var ENNSelected = this.model.ExternalNotifNodeArrDS.List;
        pl.loadItemsSelectedPreviously(pl,result,ENNSelected);

        return pl;
      ]]></script>
    </method>
  </methodList>
</userInterface>