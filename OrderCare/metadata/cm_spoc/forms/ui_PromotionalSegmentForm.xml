<?xml version="1.0" encoding="UTF-8" ?>
<userInterface name="cm_spoc.forms.PromotionalSegmentForm">
  <group>Promotion</group>
  <label>PromotionalSegmentForm</label>
  <metaVersion>4</metaVersion>
  <variableList>
    <variable name="idSelected" type="leaf">
      <valueType>dtype_com.conceptwave.system.Integer</valueType>
    </variable>
    <variable name="DiallingIterator" type="leaf">
      <flags enum-type="metadataFlag">ARRAY</flags>
      <valueType>ui_com.conceptwave.system.UserInterface</valueType>
    </variable>
    <variable name="TPChangeType" type="leaf">
      <valueType>dtype_com.conceptwave.system.Integer</valueType>
    </variable>
    <variable name="GeneralList" type="leaf">
      <flags enum-type="metadataFlag">ARRAY</flags>
      <valueType>nmeta_com.conceptwave.system.Object</valueType>
    </variable>
    <variable name="ListHistoric" type="leaf">
      <flags enum-type="metadataFlag">ARRAY</flags>
      <valueType>dstruct_cm_spoc.FinderSelectReferenceDS</valueType>
    </variable>
    <variable name="ListGeoTaxSelected" type="leaf">
      <flags enum-type="metadataFlag">ARRAY</flags>
      <valueType>dstruct_cm_spoc.FinderSelectReferenceDS</valueType>
    </variable>
    <variable name="ListSelected" type="leaf">
      <flags enum-type="metadataFlag">ARRAY</flags>
      <valueType>dstruct_cm_spoc.FinderSelectReferenceDS</valueType>
    </variable>
    <variable name="ListConsumption" type="leaf">
      <flags enum-type="metadataFlag">ARRAY</flags>
      <valueType>dstruct_cm_spoc.FinderSelectReferenceDS</valueType>
    </variable>
    <variable name="ListProvinceSelected" type="leaf">
      <flags enum-type="metadataFlag">ARRAY</flags>
      <valueType>dstruct_cm_spoc.FinderSelectReferenceDS</valueType>
    </variable>
    <variable name="RinIterator" type="leaf">
      <flags enum-type="metadataFlag">ARRAY</flags>
      <valueType>ui_com.conceptwave.system.UserInterface</valueType>
    </variable>
    <variable name="model" type="leaf">
      <valueType>dstruct_cm_spoc.data.PromotionalSegment</valueType>
    </variable>
  </variableList>
  <vformList>
    <vform name="Forms" type="frmui">
      <extends>ui_com.conceptwave.system.UserInterface/frmui_Forms</extends>
      <overlayList>
        <overlay name="PromotionalSegment" type="vform">
          <label>PromotionalSegment</label>
          <root name="VerticalLayout" type="elvlt">
            <width>750px</width>
            <elementList>
              <element name="SectionStack" type="elsectnstck">
                <elementList>
                  <element name="Section" type="elsect">
                    <elementList>
                      <element name="GeneralGrid" type="elgrd">
                        <alignment>right,center</alignment>
                        <numOfCols>2</numOfCols>
                        <width>200px</width>
                        <elementList>
                          <element name="PromotionalSegmentCode" type="elfld">
                            <labeAlign>left</labeAlign>
                            <label>Promotional Segment Code</label>
                            <labelOrientation>left</labelOrientation>
                            <variable type="varPath">
                              <variablePathList>
                                <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/leaf_model</variablePath>
                                <variablePath>dstruct_cm_spoc.data.PromotionalSegment/dstruct_PromotionalSegmentCode</variablePath>
                              </variablePathList>
                            </variable>
                            <width>150px</width>
                          </element>
                          <element name="ProSegDescription" type="elfld">
                            <labeAlign>left</labeAlign>
                            <label>Promotional Segment Description</label>
                            <labelOrientation>left</labelOrientation>
                            <variable type="varPath">
                              <variablePathList>
                                <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/leaf_model</variablePath>
                                <variablePath>dstruct_cm_spoc.data.PromotionalSegment/dstruct_ProSegDescription</variablePath>
                              </variablePathList>
                            </variable>
                            <width>150px</width>
                          </element>
                        </elementList>
                      </element>
                      <element name="MessageGrid" type="elgrd">
                        <alignment>right,center</alignment>
                        <numOfCols>3</numOfCols>
                        <width>200px</width>
                        <elementList>
                          <element name="Message2" type="elfld">
                            <editable type="varPath">
                              <variablePathList>
                                <variablePath>dtype_com.conceptwave.system.Boolean/leaf_FALSE</variablePath>
                              </variablePathList>
                            </editable>
                            <labeAlign>left</labeAlign>
                            <label>Message if the promotional segment by operation history condition is not met</label>
                            <labelOrientation>left</labelOrientation>
                            <variable type="varPath">
                              <variablePathList>
                                <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/leaf_model</variablePath>
                                <variablePath>dstruct_cm_spoc.data.PromotionalSegment/dstruct_Message</variablePath>
                              </variablePathList>
                            </variable>
                            <width>150px</width>
                          </element>
                          <element name="Message" type="elbtn">
                            <clickMethod type="varPath">
                              <variablePathList>
                                <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/usrActionMethod_FinderMessageReferenceDialog</variablePath>
                              </variablePathList>
                            </clickMethod>
                            <icon>/cwf/finder.gif</icon>
                            <width>22px</width>
                          </element>
                        </elementList>
                      </element>
                      <element name="LayoutSpacer5" type="ellsp">
                        <height>50px</height>
                      </element>
                      <element name="VerticalLayout1" type="elvlt">
                        <elementList>
                          <element name="GridLayout1" type="elhlt">
                            <alignment>right,center</alignment>
                            <elementList>
                              <element name="ChoicesSection" type="elsectnstck">
                                <width>300px</width>
                                <elementList>
                                  <element name="Section1" type="elsect">
                                    <elementList>
                                      <element name="SectionHeader" type="elsecth">
                                        <label>Subscriber&apos;s data</label>
                                      </element>
                                      <element name="VerticalLayout2" type="elgrd">
                                        <elementList>
                                          <element name="TariffPlan" type="ellab">
                                            <cellAlignment>center,center</cellAlignment>
                                            <clickMethod type="varPath">
                                              <variablePathList>
                                                <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/usrActionMethod_TariffPlanPickListDialog</variablePath>
                                              </variablePathList>
                                            </clickMethod>
                                            <label>Tariff Plan</label>
                                          </element>
                                          <element name="TPSubscription" type="ellab">
                                            <cellAlignment>center,center</cellAlignment>
                                            <clickMethod type="varPath">
                                              <variablePathList>
                                                <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/usrActionMethod_SubscriptionTariffPlanPickListDialog</variablePath>
                                              </variablePathList>
                                            </clickMethod>
                                            <label>Subscription Tariff Plan </label>
                                            <width>150px</width>
                                          </element>
                                          <element name="Rin" type="ellab">
                                            <cellAlignment>center,center</cellAlignment>
                                            <clickMethod type="varPath">
                                              <variablePathList>
                                                <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/usrActionMethod_RinPickListDialog</variablePath>
                                              </variablePathList>
                                            </clickMethod>
                                            <label>Subscriber&apos;s Rin</label>
                                          </element>
                                          <element name="Geographical" type="ellab">
                                            <cellAlignment>center,center</cellAlignment>
                                            <clickMethod type="varPath">
                                              <variablePathList>
                                                <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/usrActionMethod_GeoTaxPickListDialog</variablePath>
                                              </variablePathList>
                                            </clickMethod>
                                            <label>Geographical Tax  Area</label>
                                            <width>180px</width>
                                          </element>
                                          <element name="SubsProvince" type="ellab">
                                            <cellAlignment>center,center</cellAlignment>
                                            <clickMethod type="varPath">
                                              <variablePathList>
                                                <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/usrActionMethod_ProvincePickListDialog</variablePath>
                                              </variablePathList>
                                            </clickMethod>
                                            <label>Subscription Province</label>
                                            <width>150px</width>
                                          </element>
                                          <element name="DialingCode" type="ellab">
                                            <cellAlignment>center,center</cellAlignment>
                                            <clickMethod type="varPath">
                                              <variablePathList>
                                                <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/usrActionMethod_SubsDialPickListDialog</variablePath>
                                              </variablePathList>
                                            </clickMethod>
                                            <label>Subscriber dialling code</label>
                                            <width>150px</width>
                                          </element>
                                          <element name="Profile" type="ellab">
                                            <cellAlignment>center,center</cellAlignment>
                                            <clickMethod type="varPath">
                                              <variablePathList>
                                                <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/usrActionMethod_PromotionalProfilePickListDialog</variablePath>
                                              </variablePathList>
                                            </clickMethod>
                                            <label>Subscriber profile</label>
                                            <width>150px</width>
                                          </element>
                                          <element name="SellingMode" type="ellab">
                                            <cellAlignment>center,center</cellAlignment>
                                            <clickMethod type="varPath">
                                              <variablePathList>
                                                <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/usrActionMethod_SellingModePickListDialog</variablePath>
                                              </variablePathList>
                                            </clickMethod>
                                            <label>Selling mode</label>
                                          </element>
                                          <element name="SubscriberStatus" type="ellab">
                                            <cellAlignment>center,center</cellAlignment>
                                            <clickMethod type="varPath">
                                              <variablePathList>
                                                <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/usrActionMethod_LifeCyclePickListDialog</variablePath>
                                              </variablePathList>
                                            </clickMethod>
                                            <label>Subscriber Status/Substatus</label>
                                            <width>150px</width>
                                          </element>
                                          <element name="ServiceProviders" type="ellab">
                                            <cellAlignment>center,center</cellAlignment>
                                            <clickMethod type="varPath">
                                              <variablePathList>
                                                <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/usrActionMethod_ServiceProviderPickListDialog</variablePath>
                                              </variablePathList>
                                            </clickMethod>
                                            <label>Service Providers</label>
                                          </element>
                                        </elementList>
                                      </element>
                                    </elementList>
                                  </element>
                                </elementList>
                              </element>
                              <element name="LayoutSpacer" type="ellsp">
                                <width>100px</width>
                              </element>
                              <element name="SegmentConfiguration1" type="elvlt">
                                <width>300px</width>
                                <elementList>
                                  <element name="Table" type="eltabl">
                                    <height>200px</height>
                                    <onSelectChange type="varPath">
                                      <variablePathList>
                                        <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/uimthd_openPopUpSubscribersData</variablePath>
                                      </variablePathList>
                                    </onSelectChange>
                                    <variable type="varPath">
                                      <variablePathList>
                                        <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/leaf_ListSelected</variablePath>
                                      </variablePathList>
                                    </variable>
                                    <width>100%</width>
                                    <elementList>
                                      <element name="description" type="ellab">
                                        <variable type="varPath">
                                          <variablePathList>
                                            <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/leaf_ListSelected</variablePath>
                                            <variablePath>dstruct_cm_spoc.FinderSelectReferenceDS/dstruct_description</variablePath>
                                          </variablePathList>
                                        </variable>
                                        <width>100%</width>
                                      </element>
                                    </elementList>
                                  </element>
                                </elementList>
                              </element>
                            </elementList>
                          </element>
                          <element name="LayoutSpacer2" type="ellsp">
                            <height>50px</height>
                          </element>
                          <element name="HorizontalLayout" type="elhlt">
                            <elementList>
                              <element name="OperationsSection" type="elsectnstck">
                                <width>300px</width>
                                <elementList>
                                  <element name="Section11" type="elsect">
                                    <elementList>
                                      <element name="SectionHeader2" type="elsecth">
                                        <label>Operations history</label>
                                      </element>
                                      <element name="VerticalLayout21" type="elgrd">
                                        <elementList>
                                          <element name="SubscriberActivation" type="ellab">
                                            <cellAlignment>center,center</cellAlignment>
                                            <clickMethod type="varPath">
                                              <variablePathList>
                                                <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/usrActionMethod_popUpSubscriberActivationCriterion</variablePath>
                                              </variablePathList>
                                            </clickMethod>
                                            <label>Subscriber activation</label>
                                          </element>
                                          <element name="ActiveSubscriptions" type="ellab">
                                            <cellAlignment>center,center</cellAlignment>
                                            <clickMethod type="varPath">
                                              <variablePathList>
                                                <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/usrActionMethod_popUpActiveSubscription</variablePath>
                                              </variablePathList>
                                            </clickMethod>
                                            <label>Active subscriptions</label>
                                            <width>150px</width>
                                          </element>
                                          <element name="TopUps" type="ellab">
                                            <cellAlignment>center,center</cellAlignment>
                                            <clickMethod type="varPath">
                                              <variablePathList>
                                                <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/usrActionMethod_popUpTopUpOrigin</variablePath>
                                              </variablePathList>
                                            </clickMethod>
                                            <label>TopUps</label>
                                          </element>
                                          <element name="TariffChange" type="ellab">
                                            <cellAlignment>center,center</cellAlignment>
                                            <clickMethod type="varPath">
                                              <variablePathList>
                                                <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/usrActionMethod_popUpTPChange</variablePath>
                                              </variablePathList>
                                            </clickMethod>
                                            <label>Tariff Plan change</label>
                                            <width>180px</width>
                                          </element>
                                          <element name="ObtainingPromotions" type="ellab">
                                            <cellAlignment>center,center</cellAlignment>
                                            <clickMethod type="varPath">
                                              <variablePathList>
                                                <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/usrActionMethod_popUpObtainingPromotions</variablePath>
                                              </variablePathList>
                                            </clickMethod>
                                            <label>Obtaining promotions</label>
                                            <width>150px</width>
                                          </element>
                                          <element name="OtherOperations" type="ellab">
                                            <cellAlignment>center,center</cellAlignment>
                                            <clickMethod type="varPath">
                                              <variablePathList>
                                                <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/usrActionMethod_popUpOtherOperations</variablePath>
                                              </variablePathList>
                                            </clickMethod>
                                            <label>Other operations</label>
                                            <width>150px</width>
                                          </element>
                                        </elementList>
                                      </element>
                                    </elementList>
                                  </element>
                                </elementList>
                              </element>
                              <element name="LayoutSpacer3" type="ellsp">
                                <width>100px</width>
                              </element>
                              <element name="SegmentConfiguration2" type="elvlt">
                                <width>300px</width>
                                <elementList>
                                  <element name="Table1" type="eltabl">
                                    <height>150px</height>
                                    <onSelectChange type="varPath">
                                      <variablePathList>
                                        <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/uimthd_openPopUpOperationsHistory</variablePath>
                                      </variablePathList>
                                    </onSelectChange>
                                    <variable type="varPath">
                                      <variablePathList>
                                        <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/leaf_ListHistoric</variablePath>
                                      </variablePathList>
                                    </variable>
                                    <width>100%</width>
                                    <elementList>
                                      <element name="description1" type="ellab">
                                        <variable type="varPath">
                                          <variablePathList>
                                            <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/leaf_ListHistoric</variablePath>
                                            <variablePath>dstruct_cm_spoc.FinderSelectReferenceDS/dstruct_description</variablePath>
                                          </variablePathList>
                                        </variable>
                                      </element>
                                      <element name="itemCode" type="ellab">
                                        <variable type="varPath">
                                          <variablePathList>
                                            <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/leaf_ListHistoric</variablePath>
                                            <variablePath>dstruct_cm_spoc.FinderSelectReferenceDS/dstruct_itemCode</variablePath>
                                          </variablePathList>
                                        </variable>
                                        <width>100%</width>
                                      </element>
                                    </elementList>
                                  </element>
                                </elementList>
                              </element>
                            </elementList>
                          </element>
                          <element name="LayoutSpacer4" type="ellsp">
                            <height>50px</height>
                          </element>
                          <element name="ConsumptionLayout" type="elhlt">
                            <elementList>
                              <element name="OperationsSection1" type="elsectnstck">
                                <width>300px</width>
                                <elementList>
                                  <element name="Section111" type="elsect">
                                    <elementList>
                                      <element name="SectionHeader21" type="elsecth">
                                        <label>Consumption history</label>
                                      </element>
                                      <element name="VerticalLayout211" type="elgrd">
                                        <elementList>
                                          <element name="Calls" type="ellab">
                                            <cellAlignment>center,center</cellAlignment>
                                            <clickMethod type="varPath">
                                              <variablePathList>
                                                <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/usrActionMethod_popUpCalls</variablePath>
                                              </variablePathList>
                                            </clickMethod>
                                            <label>Calls</label>
                                          </element>
                                          <element name="SMSMessages" type="ellab">
                                            <cellAlignment>center,center</cellAlignment>
                                            <clickMethod type="varPath">
                                              <variablePathList>
                                                <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/usrActionMethod_popUpSMSMessages</variablePath>
                                              </variablePathList>
                                            </clickMethod>
                                            <label>SMS messages</label>
                                            <width>150px</width>
                                          </element>
                                          <element name="Contents" type="ellab">
                                            <cellAlignment>center,center</cellAlignment>
                                            <clickMethod type="varPath">
                                              <variablePathList>
                                                <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/usrActionMethod_popUpContents</variablePath>
                                              </variablePathList>
                                            </clickMethod>
                                            <label>Contents</label>
                                          </element>
                                        </elementList>
                                      </element>
                                    </elementList>
                                  </element>
                                </elementList>
                              </element>
                              <element name="LayoutSpacer31" type="ellsp">
                                <width>100px</width>
                              </element>
                              <element name="SegmentConfiguration21" type="elvlt">
                                <width>300px</width>
                                <elementList>
                                  <element name="Consumption" type="eltabl">
                                    <height>150px</height>
                                    <onSelectChange type="varPath">
                                      <variablePathList>
                                        <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/uimthd_openPopUpConsumption</variablePath>
                                      </variablePathList>
                                    </onSelectChange>
                                    <variable type="varPath">
                                      <variablePathList>
                                        <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/leaf_ListConsumption</variablePath>
                                      </variablePathList>
                                    </variable>
                                    <width>100%</width>
                                    <elementList>
                                      <element name="description2" type="ellab">
                                        <variable type="varPath">
                                          <variablePathList>
                                            <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/leaf_ListConsumption</variablePath>
                                            <variablePath>dstruct_cm_spoc.FinderSelectReferenceDS/dstruct_description</variablePath>
                                          </variablePathList>
                                        </variable>
                                      </element>
                                      <element name="itemCode1" type="ellab">
                                        <variable type="varPath">
                                          <variablePathList>
                                            <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/leaf_ListConsumption</variablePath>
                                            <variablePath>dstruct_cm_spoc.FinderSelectReferenceDS/dstruct_itemCode</variablePath>
                                          </variablePathList>
                                        </variable>
                                        <width>100%</width>
                                      </element>
                                    </elementList>
                                  </element>
                                </elementList>
                              </element>
                            </elementList>
                          </element>
                        </elementList>
                      </element>
                    </elementList>
                  </element>
                </elementList>
              </element>
            </elementList>
          </root>
        </overlay>
        <overlay name="Default" type="exov">
          <base>ui_com.conceptwave.system.UserInterface/frmui_Forms/vform_Default</base>
          <extends>ui_com.conceptwave.system.UserInterface/frmui_Forms/vform_Default</extends>
          <label>Default</label>
          <overrideList>
            <override name="Tabset" type="eltset">
              <width>750px</width>
              <elementList>
                <element name="PromotionalSegment" type="eltab">
                  <formReference type="varPath">
                    <variablePathList>
                      <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/frmui_Forms</variablePath>
                      <variablePath>ui_cm_spoc.forms.PromotionalSegmentForm/frmui_Forms/vform_PromotionalSegment</variablePath>
                    </variablePathList>
                  </formReference>
                  <label>Promotional Segment</label>
                </element>
              </elementList>
            </override>
          </overrideList>
        </overlay>
      </overlayList>
    </vform>
  </vformList>
  <methodList>
    <method name="cwLeafInitAction$model" type="laction">
      <path>ui_cm_spoc.forms.PromotionalSegmentForm/leaf_model</path>
      <type>initializer</type>
      <script><![CDATA[
        var m = cm_spoc.initPromotionalSegment(this.model);
        cm_spoc.initPromotionalSegmentUi(this);

        return m;
      ]]></script>
    </method>
    <method name="FinderTariffPlanReferenceDialog" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var newDetail = new cm_spoc.FinderSelectReference(null, this);
        newDetail.setBaseItemCode("base_TariffPlan");
        newDetail.parentUI = this;
        return newDetail;
      ]]></script>
    </method>
    <method name="referenceCallback" type="uimthd">
      <parameterList>
        <parameter name="itemCode" type="rifp">
          <mandatory>true</mandatory>
          <type>dtype_com.conceptwave.system.String</type>
        </parameter>
        <parameter name="baseItemCode" type="rifp">
          <mandatory>true</mandatory>
          <type>dtype_com.conceptwave.system.String</type>
        </parameter>
      </parameterList>
      <script><![CDATA[
        switch(baseItemCode){
               /* case "base_TariffPlan":
                //this.model.TariffPlanCriterionDS.TPCriterionTPArrDS.ListDS = itemCode;
                break;
                case "base_Rin":
                //this.model.TariffPlanCriterionDS.TPCriterionTPArrDS.ListDS = itemCode;
                break;*/
                case "base_Message":
                this.model.Message = itemCode;
                break;


        }
      ]]></script>
    </method>
    <method name="FinderMessageReferenceDialog" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var newDetail = new cm_spoc.FinderSelectReference(null, this);
        newDetail.setBaseItemCode("base_Message");
        newDetail.parentUI = this;
        return newDetail;
      ]]></script>
    </method>
    <method name="FinderRinReferenceDialog" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var newDetail = new cm_spoc.FinderSelectReference(null, this);
        newDetail.setBaseItemCode("base_Rin");
        newDetail.parentUI = this;
        return newDetail;
      ]]></script>
    </method>
    <method name="TariffPlanPickListDialog" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var newDetail = new cm_spoc.forms.PickListTariffPlan(null,this);
        newDetail.pickList.setParentUI(this);
        newDetail.model=this.model;

        /*var currentUsedTariffPlans = new Array();

        newDetail.pickList.selectedItems = new DataObjectList();


        var list = this.model.TariffPlanCriterionDS.TPCriterionTPArrDS.List;
        for(var i=0;i<list.length;i++){
            var code = list[i];

            for(var j=0;j<newDetail.pickList.availableItems.length;j++){
                if(newDetail.pickList.availableItems[j].id.equals(code)){
                    newDetail.pickList.availableItems.remove(newDetail.pickList.availableItems[j]);
                    var item = new cm_spoc.PickListDS();
                    item.id = code;
                    item.description = code;
                    newDetail.pickList.selectedItems.addLast(item);
                }
                    break;
            }
        }*/
        return newDetail;
      ]]></script>
    </method>
    <method name="SubscriptionTariffPlanPickListDialog" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var newDetail = new cm_spoc.forms.PickListTariffPlanSubscription(null,this);
        newDetail.pickList.setParentUI(this);
        newDetail.model=this.model;

        /*var currentUsedTariffPlans = new Array();

        newDetail.pickList.selectedItems = new DataObjectList();


        var list = this.model.TariffPlanSubscriptionCriteDS.TPSubscCritTPArrDS.List;
        for(var i=0;i<list.length;i++){
            var code = list[i];

            for(var j=0;j<newDetail.pickList.availableItems.length;j++){
                if(newDetail.pickList.availableItems[j].id.equals(code)){
                    newDetail.pickList.availableItems.remove(newDetail.pickList.availableItems[j]);
                    var item = new cm_spoc.PickListDS();
                    item.id = code;
                    item.description = code;
                    newDetail.pickList.selectedItems.addLast(item);
                }
                    break;
            }
        }*/
        return newDetail;
      ]]></script>
    </method>
    <method name="ProvincePickListDialog" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var newDetail = new cm_spoc.forms.PickListSubscriptionProvince(null,this);
        newDetail.pickList.setParentUI(this);
        newDetail.model=this.model;

        /*var currentUsedTariffPlans = new Array();

        newDetail.pickList.selectedItems = new DataObjectList();


        var list = this.model.SubscriptionProvinceCriteriDS.SPCProvinceArrDS.List;
        for(var i=0;i<list.length;i++){
            var code = list[i];

            for(var j=0;j<newDetail.pickList.availableItems.length;j++){
                if(newDetail.pickList.availableItems[j].id.equals(code)){
                    newDetail.pickList.availableItems.remove(newDetail.pickList.availableItems[j]);
                    var item = new cm_spoc.PickListDS();
                    item.id = code;
                    item.description = code;
                    newDetail.pickList.selectedItems.addLast(item);
                }
                    break;
            }
        }*/
        return newDetail;
      ]]></script>
    </method>
    <method name="refreshPromotionalSegment" type="uimthd">
      <script><![CDATA[
        this.ListSelected = new DataObjectList();

        for(var i=0;i<this.model.TariffPlanCriterionDS.TPCriterionTPArrDS.ListDS.length>0;i++){
            var item = new cm_spoc.FinderSelectReferenceDS();
            item.description = "Tariff Plan";
            this.ListSelected.addLast(item);
        }

        this.ListSelected.updateList;
      ]]></script>
    </method>
    <method name="setReadOnly" type="uimthd"/>
    <method name="popUpTopUpOrigin" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <parameterList>
        <parameter name="idTopUp" type="rifp">
          <type>dtype_com.conceptwave.system.String</type>
        </parameter>
        <parameter name="option" type="rifp">
          <type>dtype_com.conceptwave.system.Integer</type>
        </parameter>
      </parameterList>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var  topUpCriterion;

        if(option==1){
            for (var i=0; i<this.parent.model.PSTopUpCriterionArrDS.ListDS.length;i++){
                //We recover the id of the current Top Up Criterion
                //var splitData = this.model.PSTopUpCriterionArrDS.List[i].split('"');
                //var currentID = splitData[1];
               //if(currentID == idTopUp){
                if(this.model.PSTopUpCriterionArrDS.ListDS[i].id == idTopUp){
                    topUpCriterion = this.parent.model.PSTopUpCriterionArrDS.ListDS[i];
                    this.idSelected = i;
                }
            }
        }else{
            if(idTopUp.content==null)
            topUpCriterion = cm_spoc.initInnerDS("base_TopUpCriterion");
        }
        var newDetail = new cm_spoc.forms.TopUpCriterion(topUpCriterion,this);
        //newDetail.model=this.model;

        return newDetail;
      ]]></script>
    </method>
    <method name="popUpSubscriberRin" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var  model =  cm_spoc.initInnerDS("base_PromotionalSegment");
        var newDetail = new cm_spoc.forms.RinCriterion(model,this);
        newDetail.model=this.model;
        return newDetail;
      ]]></script>
    </method>
    <method name="popUpSubscriberDialling" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var  model =  cm_spoc.initInnerDS("base_PromotionalSegment");
        var newDetail = new cm_spoc.forms.SubscriberDialling(model,this);
        newDetail.model=this.model;
        return newDetail;
      ]]></script>
    </method>
    <method name="popUpSubscriberActivationCriterion" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var  model =  cm_spoc.initInnerDS("base_PromotionalSegment");
        var newDetail = new cm_spoc.forms.SubscriberCriterion(model,this);
        newDetail.model=this.model;
        return newDetail;
      ]]></script>
    </method>
    <method name="popUpActiveSubscription" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var  model =  cm_spoc.initInnerDS("base_PromotionalSegment");
        var newDetail = new cm_spoc.forms.ActiveSubscription(model,this);
        newDetail.model=this.model;
        return newDetail;
      ]]></script>
    </method>
    <method name="GeoTaxPickListDialog" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var newDetail = new cm_spoc.forms.PickListGeographicalTax(null,this);
        newDetail.pickList.setParentUI(this);
        newDetail.model=this.model;

        /*var currentUsedTariffPlans = new Array();

        newDetail.pickList.selectedItems = new DataObjectList();


        var list = this.model.GeographicalTaxAreaCriterioDS.GTACOpTaxArrDS.List;
        for(var i=0;i<list.length;i++){
            var code = list[i];

            for(var j=0;j<newDetail.pickList.availableItems.length;j++){
                if(newDetail.pickList.availableItems[j].id.equals(code)){
                    newDetail.pickList.availableItems.remove(newDetail.pickList.availableItems[j]);
                    var item = new cm_spoc.PickListDS();
                    item.id = code;
                    item.description = code;
                    newDetail.pickList.selectedItems.addLast(item);
                }
                    break;
            }
        }*/
        return newDetail;
      ]]></script>
    </method>
    <method name="SellingModePickListDialog" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var newDetail = new cm_spoc.forms.PickListSellingMode(null,this);
        newDetail.pickList.setParentUI(this);
        newDetail.model=this.model;

        /*var currentUsedTariffPlans = new Array();

        newDetail.pickList.selectedItems = new DataObjectList();


        var list = this.model.SellingModeCriterionDS.SModeCriterionArrDS.List;
        for(var i=0;i<list.length;i++){
            var code = list[i];

            for(var j=0;j<newDetail.pickList.availableItems.length;j++){
                if(newDetail.pickList.availableItems[j].id.equals(code)){
                    newDetail.pickList.availableItems.remove(newDetail.pickList.availableItems[j]);
                    var item = new cm_spoc.PickListDS();
                    item.id = code;
                    item.description = code;
                    newDetail.pickList.selectedItems.addLast(item);
                }
                    break;
            }
        }*/
        return newDetail;
      ]]></script>
    </method>
    <method name="LifeCyclePickListDialog" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var newDetail = new cm_spoc.forms.PickListLifeCycleSubstatus(null,this);
        newDetail.pickList.setParentUI(this);
        newDetail.model=this.model;

        /*var currentUsedTariffPlans = new Array();

        newDetail.pickList.selectedItems = new DataObjectList();


        var list = this.model.SubscriberSubStatusCriterioDS.SSSCLCSubStatusArrDS.List;
        for(var i=0;i<list.length;i++){
            var code = list[i];

            for(var j=0;j<newDetail.pickList.availableItems.length;j++){
                if(newDetail.pickList.availableItems[j].id.equals(code)){
                    newDetail.pickList.availableItems.remove(newDetail.pickList.availableItems[j]);
                    var item = new cm_spoc.PickListDS();
                    item.id = code;
                    item.description = code;
                    newDetail.pickList.selectedItems.addLast(item);
                }
                    break;
            }
        }*/
        return newDetail;
      ]]></script>
    </method>
    <method name="ServiceProviderPickListDialog" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var newDetail = new cm_spoc.forms.PickListServiceProvider(null,this);
        newDetail.pickList.setParentUI(this);
        newDetail.model=this.model;

        /*var currentUsedTariffPlans = new Array();

        newDetail.pickList.selectedItems = new DataObjectList();


        var list = this.model.ServiceProviderCriterionDS.SPCServiceProviderArrDS.List;
        for(var i=0;i<list.length;i++){
            var code = list[i];

            for(var j=0;j<newDetail.pickList.availableItems.length;j++){
                if(newDetail.pickList.availableItems[j].id.equals(code)){
                    newDetail.pickList.availableItems.remove(newDetail.pickList.availableItems[j]);
                    var item = new cm_spoc.PickListDS();
                    item.id = code;
                    item.description = code;
                    newDetail.pickList.selectedItems.addLast(item);
                }
                    break;
            }
        }*/
        return newDetail;
      ]]></script>
    </method>
    <method name="PromotionalProfilePickListDialog" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var newDetail = new cm_spoc.forms.PickListSubscriberProfile(null,this);
        newDetail.pickList.setParentUI(this);
        newDetail.model=this.model;

        /*newDetail.pickList.selectedItems = new DataObjectList();


        var list = this.model.PromotionalProfileCriterionDS.PPCPromotionalProfileArrDS.List;
        for(var i=0;i<list.length;i++){
            var code = list[i];

            for(var j=0;j<newDetail.pickList.availableItems.length;j++){
                if(newDetail.pickList.availableItems[j].id.equals(code)){
                    newDetail.pickList.availableItems.remove(newDetail.pickList.availableItems[j]);
                    var item = new cm_spoc.PickListDS();
                    item.id = code;
                    item.description = code;
                    newDetail.pickList.selectedItems.addLast(item);
                }
                    break;
            }
        }*/
        return newDetail;
      ]]></script>
    </method>
    <method name="popUpCalls" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <parameterList>
        <parameter name="idCall" type="rifp">
          <type>dtype_com.conceptwave.system.String</type>
        </parameter>
        <parameter name="option" type="rifp">
          <type>dtype_com.conceptwave.system.Integer</type>
        </parameter>
      </parameterList>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var  calls;

        if(option==1){
            for (var i=0; i<this.parent.model.PSCallConsumpCriterionArrDS.List.length;i++){
                //We recover the id of the current Top Up Criterion
                var splitData = this.parent.model.PSCallConsumpCriterionArrDS.List[i].split('"');
                var currentID = splitData[1];
                if(currentID == idCall)
                    calls = this.parent.model.PSCallConsumpCriterionArrDS.ListDS[i];
            }
        }else{
            if(idCall.content==null)
            calls = cm_spoc.initInnerDS("base_CallConsumptionCriterion");
        }
        var newDetail = new cm_spoc.forms.Calls(calls,this);
        //newDetail.model=this.model;

        return newDetail;
      ]]></script>
    </method>
    <method name="popUpSMSMessages" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <parameterList>
        <parameter name="idSMS" type="rifp">
          <type>dtype_com.conceptwave.system.String</type>
        </parameter>
        <parameter name="option" type="rifp">
          <type>dtype_com.conceptwave.system.Integer</type>
        </parameter>
      </parameterList>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var  sms;

        if(option==1){
            for (var i=0; i<this.parent.model.PSSMSConsumpCriterionArrDS.List.length;i++){
                //We recover the id of the current Top Up Criterion
                var splitData = this.parent.model.PSSMSConsumpCriterionArrDS.List[i].split('"');
                var currentID = splitData[1];
                if(currentID == idSMS)
                    sms = this.parent.model.PSSMSConsumpCriterionArrDS.ListDS[i];
            }
        }else{
            if(idSMS.content==null)
            sms = cm_spoc.initInnerDS("base_SMSConsumptionCriterion");
        }
        var newDetail = new cm_spoc.forms.SMSMessages(sms,this);
        //newDetail.model=this.model;

        return newDetail;
      ]]></script>
    </method>
    <method name="popUpContents" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <parameterList>
        <parameter name="idContent" type="rifp">
          <type>dtype_com.conceptwave.system.String</type>
        </parameter>
        <parameter name="option" type="rifp">
          <type>dtype_com.conceptwave.system.Integer</type>
        </parameter>
      </parameterList>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var  contM;

        if(option==1){
            for (var i=0; i<this.parent.model.PSContentConsumpCriterionArrDS.List.length;i++){
                //We recover the id of the current Top Up Criterion
                var splitData = this.parent.model.PSContentConsumpCriterionArrDS.List[i].split('"');
                var currentID = splitData[1];
                if(currentID == idContent)
                    contM = this.parent.model.PSContentConsumpCriterionArrDS.ListDS[i];
            }
        }else{
            if(idContent.content==null)
            contM = cm_spoc.initInnerDS("base_ContentConsumptionCriterion");
        }
        var newDetail = new cm_spoc.forms.Contents(contM,this);
        //newDetail.model=this.model;

        return newDetail;
      ]]></script>
    </method>
    <method name="popUpTPChange" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <parameterList>
        <parameter name="idTPChange" type="rifp">
          <type>dtype_com.conceptwave.system.String</type>
        </parameter>
        <parameter name="option" type="rifp">
          <type>dtype_com.conceptwave.system.Integer</type>
        </parameter>
      </parameterList>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var tpChange;
        if(option==1){
            for (var i=0; i<this.parent.model.PSTPChangeCriterionArrDS.List.length;i++){
                //We recover the id of the current Top Up Criterion
                var splitData = this.parent.model.PSTPChangeCriterionArrDS.List[i].split('"');
                var currentID = splitData[1];
                if(currentID == idTPChange)
                    tpChange = this.parent.model.PSTPChangeCriterionArrDS.ListDS[i];
                    this.idSelected = i;
            }
        }else{
            if(idTPChange.content==null)
            tpChange = cm_spoc.initInnerDS("base_TariffPlanChangeCriterion");
        }
        var newDetail = new cm_spoc.forms.TariffPlanChange(tpChange,this);
        //newDetail.model=this.model;

        return newDetail;
      ]]></script>
    </method>
    <method name="popUpObtainingPromotions" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <parameterList>
        <parameter name="idPromotion" type="rifp">
          <type>dtype_com.conceptwave.system.String</type>
        </parameter>
        <parameter name="option" type="rifp">
          <type>dtype_com.conceptwave.system.Integer</type>
        </parameter>
      </parameterList>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var  obtPromo;
        if(option==1){
            for (var i=0; i<this.parent.model.PSAssignedPromCriterionArrDS.List.length;i++){
                //We recover the id of the current Top Up Criterion
                var splitData = this.parent.model.PSAssignedPromCriterionArrDS.List[i].split('"');
                var currentID = splitData[1];
                if(currentID == idPromotion)
                    obtPromo = this.parent.model.PSAssignedPromCriterionArrDS.ListDS[i];
            }
        }else{
            if(idPromotion.content==null)
            obtPromo = cm_spoc.initInnerDS("base_AssignedPromotionCriterion");
        }
        var newDetail = new cm_spoc.forms.ObtainingPromotions(obtPromo,this);
        //newDetail.model=this.model;

        return newDetail;
      ]]></script>
    </method>
    <method name="popUpOtherOperations" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <parameterList>
        <parameter name="idOtherOp" type="rifp">
          <type>dtype_com.conceptwave.system.String</type>
        </parameter>
        <parameter name="option" type="rifp">
          <type>dtype_com.conceptwave.system.Integer</type>
        </parameter>
      </parameterList>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var otherOp;
        if(option==1){
            for (var i=0; i<this.parent.model.PSOtherOpCriterionArrDS.List.length;i++){
                //We recover the id of the current Top Up Criterion
                var splitData = this.parent.model.PSOtherOpCriterionArrDS.List[i].split('"');
                var currentID = splitData[1];
                if(currentID == idOtherOp)
                    otherOp = this.parent.model.PSOtherOpCriterionArrDS.ListDS[i];
            }
        }else{
            if(idOtherOp.content==null)
            otherOp = cm_spoc.initInnerDS("base_OtherOperationCriterion");
        }
        var newDetail = new cm_spoc.forms.OtherOperations(otherOp,this);
        //newDetail.model=this.model;

        return newDetail;
      ]]></script>
    </method>
    <method name="openPopUpSubscribersData" type="uimthd">
      <script><![CDATA[
        if(this.ListSelected.selected){

            var selected = this.ListSelected.selected[0];
            this.ListSelected.deselectAllRecords();
            this.ListSelected.setSelected(selected);

            var selectionId = selected.id;
            var selectionDescription = selected.description;

            switch (selectionDescription){
                case "Tariff Plan":
                    this.TariffPlanPickListDialog();
                    break;

                case "Subscription Tariff Plan":
                    this.SubscriptionTariffPlanPickListDialog();
                    break;

                case "Subscriber's RIN":
                    this.RinPickListDialog();
                    break;

                 case "Geographical tax area":
                    this.GeoTaxPickListDialog();
                    break;

                case  "Subscription province":
                    this.ProvincePickListDialog();
                    break;

                case  "Subscriber's dialling code":
                    this.SubsDialPickListDialog();
                    break;

                case   "Subscriber profile":
                    this.PromotionalProfilePickListDialog();
                    break;

                case   "Selling mode":
                    this.SellingModePickListDialog();
                    break;

                 case  "Subscriber status/substatus":
                    this.LifeCyclePickListDialog();
                    break;

                 case   "Service Providers":
                    this.ServiceProviderPickListDialog();
                    break;

            }

        }
      ]]></script>
    </method>
    <method name="openPopUpOperationsHistory" type="uimthd">
      <script><![CDATA[
        if(this.ListHistoric.selected){

            var selected = this.ListHistoric.selected[0];
            this.ListHistoric.deselectAllRecords();
            this.ListHistoric.setSelected(selected);

            var selectionId = selected.itemCode;
            var selectionDescription = selected.description;

            switch (selectionDescription){
                case "Subscriber activation":
                    this.popUpSubscriberActivationCriterion();
                    break;

                case "Active subscriptions":
                    this.popUpActiveSubscription();
                    break;

                case "Top Up":
                    //Load the screen with the proper Top Up
                    this.popUpTopUpOrigin(selectionId,1);
                    break;

                 case "Tariff Plan Change":
                    //Load the screen with the proper Tariff Change
                    this.popUpTPChange(selectionId,1);
                    break;

                case  "Nº Promotion":
                    //Load the screen with the proper Promotion
                    this.popUpObtainingPromotions(selectionId,1);
                    break;

                default :
                    var selectArr = selectionDescription.split(' ');
                    if(selectArr[0] == "Operation")
                        //Load the screen with the proper Operation
                        this.popUpOtherOperations(selectionId,1);
                    break;

            }

        }
      ]]></script>
    </method>
    <method name="openPopUpConsumption" type="uimthd">
      <script><![CDATA[
        if(this.ListConsumption.selected){

            var selected = this.ListConsumption.selected[0];
            this.ListConsumption.deselectAllRecords();
            this.ListConsumption.setSelected(selected);

            var selectionId = selected.itemCode;
            var selectionDescription = selected.description;

            var descriptionI = selectionDescription.split(' ');
            var descString="";
            if(descriptionI.length>2)
                descString = descriptionI[0]+" "+descriptionI[1];

            switch (descString){

                case "Calls consumption":
                    //Load the screen with the proper Call
                    this.popUpCalls(selectionId,1);
                    break;

                 case "SMS consumed":
                    //Load the screen with the proper SMS
                    this.popUpSMSMessages(selectionId,1);
                    break;

                case  "Contents consumption":
                    //Load the screen with the proper Content
                    this.popUpContents(selectionId,1);
                    break;

            }

        }
      ]]></script>
    </method>
    <method name="RinPickListDialog" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var newDetail = new cm_spoc.forms.PickListRin(null,this);
        newDetail.pickList.setParentUI(this);
        newDetail.model=this.model;

        return newDetail;
      ]]></script>
    </method>
    <method name="SubsDialPickListDialog" type="usrActionMethod">
      <dialogObject>ui_com.conceptwave.system.Dialog</dialogObject>
      <showInPopup>true</showInPopup>
      <script><![CDATA[
        var newDetail = new cm_spoc.forms.PickListSubscriberDialling(null,this);
        newDetail.pickList.setParentUI(this);
        newDetail.model=this.model;

        return newDetail;
      ]]></script>
    </method>
  </methodList>
</userInterface>