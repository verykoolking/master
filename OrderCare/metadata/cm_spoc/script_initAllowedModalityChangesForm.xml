<?xml version="1.0" encoding="UTF-8" ?>
<script name="cm_spoc.initAllowedModalityChangesForm">
  <group>ui_scripts.TariffPlan</group>
  <label>initAllowedModalityChangesForm</label>
  <metaVersion>4</metaVersion>
  <parameterList>
    <parameter name="ui" type="rifp">
      <type>nmeta_com.conceptwave.system.Object</type>
    </parameter>
  </parameterList>
  <script><![CDATA[
    var model = ui.model;
    ui.ModalityDestinationListFormArr = new Array();
    if (!model.specificationCode){
        model = cm_spoc.initModelForCreation(model);
        model.BetweenSameTechnology = false;
        ui.OptionBetweenSameTechnology=model.BetweenSameTechnology;
    }else{
        model = cm_spoc.initModelForModification(model);

        if(ui.model.AllowedModalityChangesArr){

            var IteratorVariableName="ModalityDestinationListFormArr";
            var ArrDS=ui.model.AllowedModalityChangesArrDS.ListDS;
            var uiArrForm="cm_spoc.forms.ModalityDestinationListForm";

            var str = "";
            cm_spoc.loadListElements(ui,ArrDS,uiArrForm,IteratorVariableName);
        }
    }
    return model;
  ]]></script>
</script>