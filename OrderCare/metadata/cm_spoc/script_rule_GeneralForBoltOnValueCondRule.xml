<?xml version="1.0" encoding="UTF-8" ?>
<script name="cm_spoc.rule_GeneralForBoltOnValueCondRule">
  <group>rules_scripts.BoltOnType</group>
  <label>rule_GeneralForBoltOnValueCondRule</label>
  <metaVersion>4</metaVersion>
  <parameterList>
    <parameter name="data" type="rifp">
      <type>nmeta_com.conceptwave.system.Object</type>
    </parameter>
    <parameter name="errList" type="rifp">
      <type>nmeta_com.conceptwave.system.Object</type>
    </parameter>
  </parameterList>
  <script><![CDATA[
    /*
     * data = cm_spoc.data.BoltOnType
     *
     * If BoltOnMustBeParticular is FALSE we must have that:
     * GeneralForBoltOn = TRUE
     * BoltOnValue = not empty
     *
     * data=cm_spoc.data.BoltOnType
     */


    /*
    if (data.BoltOnGenericSpecificationDS.BoltOnMustBeParticular)
    {
        return false;

    } else if (!data.BoltOnGenericSpecificationDS.BoltOnMustBeParticular && data.GeneralBoltOnValuesSpecDS.BoltOnValue && data.GeneralBoltOnValuesSpecDS.GeneralForBoltOn)  {

       return false;

    }

    errList.addErrorMessage(data,["No Value in Mandatory Field : General For BoltOn , Bolt On Value" ] , "NGAA_003","E");

    -----
    GeneralForBoltOn must be true
    BoltOnValue not empty --> 0
    BoltOnMustBeParticular==false
    */

    var ent1=data.BoltOnGenericSpecificationDS;
    var ent2=data.GeneralBoltOnValuesSpecDS;

    if (ent2.GeneralForBoltOn==false && ent1.BoltOnMustBeParticular==false && ent2.BoltOnValue!=null)
        errList.addErrorMessage(data,["General For Bolt On must be true"] , "NGAA_003","E");
    else if (ent2.BoltOnValue==null  && ent1.BoltOnMustBeParticular==false && ent2.GeneralForBoltOn!=false)
        errList.addErrorMessage(data,["Bolt On Value can't be empty"] , "NGAA_003","E");
    else if (ent2.GeneralForBoltOn==false && ent2.BoltOnValue==null && ent1.BoltOnMustBeParticular==false)
        errList.addErrorMessage(data,["General For Bolt On must be true and Bolt On Value can't be empty"] , "NGAA_003","E");
    return false;
  ]]></script>
</script>