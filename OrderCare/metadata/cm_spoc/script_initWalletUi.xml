<?xml version="1.0" encoding="UTF-8" ?>
<script name="cm_spoc.initWalletUi">
  <group>ui_scripts.Wallet</group>
  <label>initWalletUi</label>
  <metaVersion>4</metaVersion>
  <parameterList>
    <parameter name="ui" type="rifp">
      <type>nmeta_com.conceptwave.system.Object</type>
    </parameter>
  </parameterList>
  <script><![CDATA[
    ui.DateThresholdIterator = new Array();
    var dateThresholdIteratorDS=ui.model.WWExpiryDateWarningThresArrDS.ListDS;
    if(!ui.model.specificationCode){
       // cm_spoc.addListElement(ui,dateThresholdIteratorDS,"cm_spoc.forms.ExpiryDateWarningThresholdUI","base_WalletExpiryDateWarningThre","DateThresholdIterator");
    }
    else{
       cm_spoc.loadListElements(ui,dateThresholdIteratorDS, "cm_spoc.forms.ExpiryDateWarningThresholdUI", "DateThresholdIterator");
    }


    ui.BalanceThresholdIterator = new Array();
    var balanceThresholdIteratorDS=ui.model.WWBalanceWarningThresArrDS.ListDS;
    if(!ui.model.specificationCode){
       // cm_spoc.addListElement(ui,balanceThresholdIteratorDS,"cm_spoc.forms.BalanceWarningThresholdUI","base_WalletBalanceWarningThresho","BalanceThresholdIterator");
    }
    else{
       cm_spoc.loadListElements(ui,balanceThresholdIteratorDS, "cm_spoc.forms.BalanceWarningThresholdUI", "BalanceThresholdIterator");
    }

    ui.WalletIterator = new Array();
    var walletIteratorDS=ui.model.WWalletValuesPerPlanArrDS.ListDS;
    if(!ui.model.specificationCode){
       // cm_spoc.addListElement(ui,dateThresholdIteratorDS,"cm_spoc.forms.ExpiryDateWarningThresholdUI","base_WalletExpiryDateWarningThre","DateThresholdIterator");
    }
    else{
       cm_spoc.loadListElements(ui, walletIteratorDS, "cm_spoc.forms.ValuesTariffPlanUI", "WalletIterator");
    }


    /*if(ui.model.specificationCode){
        for(var i=0;i<ui.model.TariffPlanNotAllowedPerArrDS.List.length;i++){

            var found = false;

            for(var j=0;j<ui.TariffPlanPickList.availableItems.length;j++){
            var item = ui.TariffPlanPickList.availableItems[j];
                if(item.id == ui.model.TariffPlanNotAllowedPerArrDS.List[i]){
                    found = true;
                    break;
                }
            }

            if(found){
                ui.TariffPlanPickList.selectedItems.addLast(item);
                ui.TariffPlanPickList.availableItems.remove(item);
            }
        }
    }*/
  ]]></script>
</script>