<?xml version="1.0" encoding="UTF-8" ?>
<script name="cm_spoc.initNotifWalletRuleUI">
  <group>ui_scripts.TariffPlan.init</group>
  <label>initNotifWalletRuleUI</label>
  <metaVersion>4</metaVersion>
  <parameterList>
    <parameter name="ui" type="rifp">
      <type>nmeta_com.conceptwave.system.Object</type>
    </parameter>
  </parameterList>
  <script><![CDATA[
    ui.NotifWalletRuleIterator = new Array();
    var model = ui.model.SOWNotifWalletRuleArrDS.ListDS;

    if(!ui.model.specificationCode){
       //cm_spoc.addListElement(ui, model,"cm_spoc.forms.NotifWalletRuleUI","base_NotifWalletRule","NotifWalletRuleIterator");
    }else{
       // model = model.ListDS;
        for ( var i = 0; i < model.length; i++ ){
         cm_spoc.initModelForModification(model[i]);
        }
        cm_spoc.loadListElements(ui, model, "cm_spoc.forms.NotifWalletRuleUI", "NotifWalletRuleIterator");
        for ( var i = 0; i < model.length; i++ ) {
         model[i].BalanceMsgEnum = model[i].BalanceMsg;
         model[i].ExpirationMsgEnum = model[i].ExpirationMsg;
         model[i].ConsumptionMsgEnum = model[i].ConsumptionMsg;
         model[i].ExhaustedMsgEnum = model[i].ExhaustedMsg;
        }
        for ( var j = 0; j < ui.NotifWalletRuleIterator.length; j++ ) {
            var str = "";
            var arrList =  ui.NotifWalletRuleIterator[j].model.NWRWalletArrDS.List;
            for ( var k = 0; k<arrList.length;k++ ) {
                 if ( k>0 )
                str = str + ",";
            str = str + arrList[k];
            }

            ui.NotifWalletRuleIterator[j].AllowedWalletsLabel = str;
        }
    }
  ]]></script>
</script>