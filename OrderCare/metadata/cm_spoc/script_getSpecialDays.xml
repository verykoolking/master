<?xml version="1.0" encoding="UTF-8" ?>
<script name="cm_spoc.getSpecialDays">
  <group>ui_scripts.Calendars.FinderScript</group>
  <label>getSpecialDays</label>
  <metaVersion>4</metaVersion>
  <parameterList>
    <parameter name="finder" type="rifp">
      <type>nmeta_com.conceptwave.system.Object</type>
    </parameter>
  </parameterList>
  <script><![CDATA[
    var serviceProviderDefault = cm_spoc.getServiceProviderDefault() ? cm_spoc.getServiceProviderDefault().itemCode : null;
    var yearDefault = new Date().getFullYear();

    var serviceProvider = finder.parent.serviceProvider ? finder.parent.serviceProvider : serviceProviderDefault;
    var year = finder.parent.year ? finder.parent.year : yearDefault;

    var result = cm_spoc.getAllSpecialDays();

    cm_spoc.filterByServiceProviderAndYear(result,serviceProvider,year);
    cm_spoc.setProperties(result);

    return result;
  ]]></script>
</script>